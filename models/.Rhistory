}
organising_results_stand <- function(data, comb) {
df <- plyr::ldply(data, data.frame) %>%
bind_cols(comb) %>%
select(H, V, L, F, fla, S, name, absPAR_one_s, absPAR_two_s) %>%
mutate(
name = name %>% gsub("_S[1-3]", "",., perl = TRUE)
) %>%
group_by(H, V, L, F, fla, la_stand, name) %>%
summarise_at(vars(absPAR_one_s, absPAR_two_s), mean)
}
results_PAR_ft_stand_fla_0.1 <- model_conditions_stand_fla_0.1 %>%
purrr::map(PAR_calculator_ft_stand)
results_PAR_ppa_stand_fla_0.1 <- model_conditions_stand_fla_0.1 %>%
purrr::map(PAR_calculator_ppa_stand)
final_results_ft_stand_fla_0.1 <- organising_results_stand(results_PAR_ft_stand_fla_0.1, combinations_stand_fla_0.1) %>%
add_column(model = "FLAT TOP")
organising_results_stand <- function(data, comb) {
df <- plyr::ldply(data, data.frame) %>%
bind_cols(comb) %>%
select(H, V, L, F, fla, S, name, absPAR_one_s, absPAR_two_s) %>%
mutate(
name = name %>% gsub("_S[1-3]", "",., perl = TRUE)
) %>%
group_by(H, V, L, F, fla, la_stand, name) %>%
summarise_at(vars(absPAR_one_s, absPAR_two_s), mean)
}
results_PAR_ppa_stand_fla_0.1
final_results_ft_stand_fla_0.1 <- organising_results_stand(results_PAR_ft_stand_fla_0.1, combinations_stand_fla_0.1) %>%
add_column(model = "FLAT TOP")
combinations_stand_fla_0.1
organising_results_stand <- function(data, comb) {
df <- plyr::ldply(data, data.frame) %>%
bind_cols(comb) %>%
select(H, V, L, F, fla, S, name, absPAR_one_s, absPAR_two_s) %>%
mutate(
name = name %>% gsub("_S[1-3]", "",., perl = TRUE)
) %>%
group_by(H, V, L, F, fla, name) %>%
summarise_at(vars(absPAR_one_s, absPAR_two_s), mean)
}
final_results_ft_stand_fla_0.1 <- organising_results_stand(results_PAR_ft_stand_fla_0.1, combinations_stand_fla_0.1) %>%
add_column(model = "FLAT TOP")
final_results_ppa_stand_fla_0.1 <- organising_results_stand(results_PAR_ppa_stand_fla_0.1, combinations_stand_fla_0.1) %>%
add_column(model = "PPA")
final_results_ft_ppa_stand_fla_0.1 <- rbind(final_results_ft_stand_fla_0.1, final_results_ppa_stand_fla_0.1)
maespa_n_others_stand_fla_0.1 <- rbind(final_results_ft_ppa_stand_fla_0.1, maespa_stand_fla_0.1)
#stand 0.1
maespa_n_others_stand_fla_0.1 %>%
select(absPAR_two_s, model, V, L) %>%
ggplot(aes(V, absPAR_two_s)) +
geom_point(aes(colour = as.factor(model))) +
geom_line(aes(colour = as.factor(model))) +
facet_wrap(~L) +
labs(title = "two stream - stand 0.1", x = "V", y = "Absorbed PAR (MJ tree-1 d-1)",
colour = "Canopy Approximation")
#stand 0.1
maespa_n_others_stand_fla_0.1 %>%
select(absPAR_two_s, model, V, L) %>%
ggplot(aes(L, absPAR_two_s)) +
geom_point(aes(colour = as.factor(model))) +
geom_line(aes(colour = as.factor(model))) +
facet_wrap(~V) +
labs(title = "two stream - stand 0.1", x = "V", y = "Absorbed PAR (MJ tree-1 d-1)",
colour = "Canopy Approximation")
actual_stand_fla_0.1 <- maespa_n_others_stand_fla_0.1 %>% filter(model == "MAESPA")
predicted_ppa_stand_fla_0.1 <- maespa_n_others_stand_fla_0.1 %>% filter(model == "PPA")
predicted_ft_stand_fla_0.1 <- maespa_n_others_stand_fla_0.1 %>% filter(model == "FLAT TOP")
rmse(actual_stand_fla_0.1$absPAR_two_s, predicted_ppa_stand_fla_0.1$absPAR_two_s)
rmse(actual_stand_fla_0.1$absPAR_two_s, predicted_ft_stand_fla_0.1$absPAR_two_s)
deep_leaf_distribtuion_stand <- function(httrunk, htcrown = 6.36, radx = 2.54, rady = 2.54,
larea = 27, n_slices = 50) {
# adaption from Maeswrap, https://github.com/RemkoDuursma/Maeswrap/blob/master/R/coord3dshape.R
z <- seq(0, 1, length.out = n_slices)
zabs <- z*htcrown
distfun <- sqrt(1 - ((z-1/2)^2)/((1/2)^2))
rx <- radx*distfun
ry <- rady*distfun
slice_xs_area <- 3.14*rx*ry
slice_xs_vol <- (htcrown/n_slices)*slice_xs_area
slice_volume_frac <- slice_xs_vol/sum(slice_xs_vol)
tibble(
h = httrunk + zabs,
larea = larea*slice_volume_frac
)
}
View(results_stand_fla_0.1)
View(results_stand_fla_0.1[["H15_V0_L0.44_F1_fla0.1_S1"]])
df <- tibble(d = c(1:100))
df
df %>%
filter(d == c(50:60))
df %>%
filter(d == c(1:10))
df %>%
filter(d == c(1:20))
df %>%
filter(d == c(20:20))
df %>%
filter(d == c(20:35))
df %>%
filter(d == c(34:37, 44:47, 54:57, 64:67))
c(34:37, 44:47, 54:57, 64:67)
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)
df %>%
filter(d == LAI0.5_focal)
select
df %>%
slice(d == LAI0.5_focal)
df <- tibble(d = c(1:100))
df %>%
slice(d == LAI0.5_focal)
df <- tibble(d = c(1:100))
LAI0.5_focal
df
df %>%
filter(d == LAI0.5_focal)
df %>%
slice(LAI0.5_focal)
df <- tibble(d = c(1:100))
LAI0.5_focal
df %>%
slice(c(34,35, 36, 37, 44, 45, 46, 47, 54, 55, 56, 57, 64, 65, 66, 67))
View(results_stand_fla_0.1[["H15_V0_L1.521_F1_fla0.1_S2"]])
LAI1.5_focal = c(115*50:120*50, 133*50:138*50, 151*50:156*50, 170*50:175*50, 187*50:192*50, 205*50:210*50)
LAI1.5_focal
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)*50
LAI1.5_focal = c(115:120, 133:138, 151:156, 170:175, 187:192, 205:210)*50
LAI0.5_focal
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)*50
LAI0.5_focal/50
View(results_stand_fla_0.1)
View(results_stand_fla_0.1[["H15_V0.5_L2.916_F1_fla0.1_S2"]])
View(results_stand_fla_0.1[["H15_V0_L5.402_F1_fla0.1_S1"]])
View(results_stand_fla_0.1[["H15_V0_L4.556_F1_fla0.1_S1"]])
View(results_stand_fla_0.1[["H15_V0_L5.402_F1_fla0.1_S2"]])
df <- results_stand_fla_0.1[["H15_V0_L5.402_F1_fla0.1_S2"]]
df <- results_stand_fla_0.1[["H15_V0_L5.402_F1_fla0.1_S2"]] %>%
mutate(num = 1:nrow(.))
df
df <- results_stand_fla_0.1[["H15_V0_L5.402_F1_fla0.1_S2"]] %>%
mutate(num = 1:nrow(.)) %>%
filter(focal == "TRUE")
df$num
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)*50
nrow(LAI0.5_focal)
length(LAI0.5_focal)
length(LAI1.5_focal)
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)*50
LAI1.5_focal = c(115:120, 133:138, 151:156, 170:175, 187:192, 205:210)*50
LAI3_focal = c(244:251, 270:277, 296:303, 322:329, 348:355, 374:381, 400:407, 426:433)*50
LAI4.5_focal = c(321:330, 352:361, 383:392, 414:423, 445:454, 476:485, 507:516, 538:547, 569:578, 600:609)*50
LAI5.5_focal = c(433:443, 468:478, 503:513, 538:548, 573:583, 608:618, 643:653, 678:688, 713:723, 748:758,
783:793)*50
length(LAI3_focal)
length(LAI4.5_focal)
length(LAI5.5_focal)
deep_crown_set_up_stand <- function(d) {
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)*50
LAI1.5_focal = c(115:120, 133:138, 151:156, 170:175, 187:192, 205:210)*50
LAI3_focal = c(244:251, 270:277, 296:303, 322:329, 348:355, 374:381, 400:407, 426:433)*50
LAI4.5_focal = c(321:330, 352:361, 383:392, 414:423, 445:454, 476:485, 507:516, 538:547, 569:578, 600:609)*50
LAI5.5_focal = c(433:443, 468:478, 503:513, 538:548, 573:583, 608:618, 643:653, 678:688, 713:723, 748:758,
783:793)*50
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
if(nrow(data) == 100*50) {
data <- data %>%
slice(LAI0.5_focal)
} else if(nrow(data) == 324*50) {
data <- data %>%
slice(LAI1.5_focal)
} else if(nrow(data) == 676*50) {
data <- data %>%
slice(LAI3_focal)
} else if(nrow(data) == 961*50) {
data <- data %>%
slice(LAI4.5_focal)
} else if(nrow(data) == 1225*50) {
data <- data %>%
slice(LAI5.5_focal)
}
}
deep_crown_set_up_stand <- function(d) {
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)*50
LAI1.5_focal = c(115:120, 133:138, 151:156, 170:175, 187:192, 205:210)*50
LAI3_focal = c(244:251, 270:277, 296:303, 322:329, 348:355, 374:381, 400:407, 426:433)*50
LAI4.5_focal = c(321:330, 352:361, 383:392, 414:423, 445:454, 476:485, 507:516, 538:547, 569:578, 600:609)*50
LAI5.5_focal = c(433:443, 468:478, 503:513, 538:548, 573:583, 608:618, 643:653, 678:688, 713:723, 748:758,
783:793)*50
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
if(nrow(data) == 100*50) {
data <- data %>%
slice(LAI0.5_focal)
} else if(nrow(data) == 324*50) {
data <- data %>%
slice(LAI1.5_focal)
} else if(nrow(data) == 676*50) {
data <- data %>%
slice(LAI3_focal)
} else if(nrow(data) == 961*50) {
data <- data %>%
slice(LAI4.5_focal)
} else if(nrow(data) == 1225*50) {
data <- data %>%
slice(LAI5.5_focal)
}
}
deep_crown_set_up_stand <- function(d) {
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)*50
LAI1.5_focal = c(115:120, 133:138, 151:156, 170:175, 187:192, 205:210)*50
LAI3_focal = c(244:251, 270:277, 296:303, 322:329, 348:355, 374:381, 400:407, 426:433)*50
LAI4.5_focal = c(321:330, 352:361, 383:392, 414:423, 445:454, 476:485, 507:516, 538:547, 569:578, 600:609)*50
LAI5.5_focal = c(433:443, 468:478, 503:513, 538:548, 573:583, 608:618, 643:653, 678:688, 713:723, 748:758,
783:793)*50
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
if(nrow(data) == 100*50) {
data <- data %>%
slice(LAI0.5_focal)
} else if(nrow(data) == 324*50) {
data <- data %>%
slice(LAI1.5_focal)
} else if(nrow(data) == 676*50) {
data <- data %>%
slice(LAI3_focal)
} else if(nrow(data) == 961*50) {
data <- data %>%
slice(LAI4.5_focal)
} else if(nrow(data) == 1225*50) {
data <- data %>%
slice(LAI5.5_focal)
}
}
deep_crown_stand_fla_0.1 <- results_stand_fla_0.1 %>%
purrr::map(deep_crown_set_up_stand)
View(deep_crown_stand_fla_0.1)
View(deep_crown_stand_fla_0.1[["H15_V0.5_L5.402_F1_fla0.1_S2"]])
PAR_calculator_DC_stand <- function(la) {
UMOLperStoMJperH <-
3600 /  # s / hr
4.57 /  # umol quanta / J
10^6    # J / MJ
met <- readmet(filename = "met.dat", nlines = -1) %>%
as_tibble() %>%
select(time = TIME, PAR) %>%
mutate(
PAR_one_s = 0.77 * PAR * exp(-0.77*la),
PAR_two_s = 0.77* PAR*(exp(-0.77*la) + (1- exp(-0.77*la))*exp(-0.35*la)),
MJ_per_H_one_s = PAR_one_s * UMOLperStoMJperH,
MJ_per_H_two_s = PAR_two_s * UMOLperStoMJperH )
tibble(absPAR_one_s = pracma::trapz(met$time, met$MJ_per_H_one_s) * 1,
absPAR_two_s = pracma::trapz(met$time, met$MJ_per_H_two_s) * 1)
}
deep_crown_set_up_stand <- function(d) {
LAI0.5_focal = c(34*50:37*50, 44*50:47*50, 54*50:57*50, 64*50:67*50)
LAI1.5_focal = c(115*50:120*50, 133*50:138*50, 151*50:156*50, 170*50:175*50, 187*50:192*50, 205*50:210*50)
LAI3_focal = c(244*50:251*50, 270*50:277*50, 296*50:303*50, 322*50:329*50, 348*50:355*50, 374*50:381*50,
400*50:407*50, 426*50:433*50)
LAI4.5_focal = c(321*50:330*50, 352*50:361*50, 383*50:392*50, 414*50:423*50, 445*50:454*50, 476*50:485*50,
507*50:516*50, 538*50:547*50, 569*50:578*50, 600*50:609*50)
LAI5.5_focal = c(433*50:443*50, 468*50:478*50, 503*50:513*50, 538*50:548*50, 573*50:583*50, 608*50:618*50,
643*50:653*50, 678*50:688*50, 713*50:723*50, 748*50:758*50, 783*50:793*50)
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
if(nrow(data) == 100*50) {
data <- data %>%
slice(LAI0.5_focal)
} else if(nrow(data) == 324*50) {
data <- data %>%
slice(LAI1.5_focal)
} else if(nrow(data) == 676*50) {
data <- data %>%
slice(LAI3_focal)
} else if(nrow(data) == 961*50) {
data <- data %>%
slice(LAI4.5_focal)
} else if(nrow(data) == 1225*50) {
data <- data %>%
slice(LAI5.5_focal)
}
}
deep_crown_stand_fla_0.1 <- results_stand_fla_0.1 %>%
purrr::map(deep_crown_set_up_stand)
View(deep_crown_stand_fla_0.1)
View(deep_crown_stand_fla_0.1[["H15_V0_L0.44_F1_fla0.1_S1"]])
LAI0.5_focal = c(34*50:37*50, 44*50:47*50, 54*50:57*50, 64*50:67*50)
LAI1.5_focal = c(115*50:120*50, 133*50:138*50, 151*50:156*50, 170*50:175*50, 187*50:192*50, 205*50:210*50)
LAI3_focal = c(244*50:251*50, 270*50:277*50, 296*50:303*50, 322*50:329*50, 348*50:355*50, 374*50:381*50,
400*50:407*50, 426*50:433*50)
LAI4.5_focal = c(321*50:330*50, 352*50:361*50, 383*50:392*50, 414*50:423*50, 445*50:454*50, 476*50:485*50,
507*50:516*50, 538*50:547*50, 569*50:578*50, 600*50:609*50)
LAI5.5_focal = c(433*50:443*50, 468*50:478*50, 503*50:513*50, 538*50:548*50, 573*50:583*50, 608*50:618*50,
643*50:653*50, 678*50:688*50, 713*50:723*50, 748*50:758*50, 783*50:793*50)
LAI0.5_focal
deep_crown_distribution <-
d$httrunk[1:nrow(results_stand_fla_0.1)] %>%
purrr::map(deep_leaf_distribtuion_stand)
results_stand_fla_0.1
deep_crown_distribution <-
results_stand_fla_0.1$httrunk[1:nrow(results_stand_fla_0.1)] %>%
purrr::map(deep_leaf_distribtuion_stand)
d = results_stand_fla_0.1
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
deep_crown_distribution <-
d$httrunk[1:nlength(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
deep_crown_distribution <-
d$httrunk[1:length(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
View(deep_crown_distribution)
d = results_fla_0.1
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion)
d$httrunk
d$httrunk[1:nrow(d)]
length(d)
d$httrunk[1:length(d)]
deep_crown_distribution <-
d$httrunk[1:length(d)] %>%
purrr::map(deep_leaf_distribtuion)
deep_leaf_distribtuion <- function(httrunk, htcrown = 6.36, radx = 2.54, rady = 2.54,
larea = 27, n_slices = 50) {
# adaption from Maeswrap, https://github.com/RemkoDuursma/Maeswrap/blob/master/R/coord3dshape.R
z <- seq(0, 1, length.out = n_slices)
zabs <- z*htcrown
distfun <- sqrt(1 - ((z-1/2)^2)/((1/2)^2))
rx <- radx*distfun
ry <- rady*distfun
slice_xs_area <- 3.14*rx*ry
slice_xs_vol <- (htcrown/n_slices)*slice_xs_area
slice_volume_frac <- slice_xs_vol/sum(slice_xs_vol)
tibble(
h = httrunk + zabs,
larea = larea*slice_volume_frac
)
}
deep_crown_distribution <-
d$httrunk[1:length(d)] %>%
purrr::map(deep_leaf_distribtuion)
View(results_fla_0.1)
d = results_fla_0.1[[1]]
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion)
View(deep_crown_distribution)
View(deep_crown_distribution[[1]])
deep_crown_set_up <- function(d) {
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
if(nrow(data) == 100*50) {
data <- data %>%
filter(tree_num == 55)
} else if(nrow(data) == 324*50) {
data <- data %>%
filter(tree_num == 171)
} else if(nrow(data) == 676*50) {
data <- data %>%
filter(tree_num == 351)
} else if(nrow(data) == 961*50) {
data <- data %>%
filter(tree_num == 481)
} else if(nrow(data) == 1225*50) {
data <- data %>%
filter(tree_num == 613)
}
}
d = results_stand_fla_0.1[[1]]
d
deep_crown_distribution <-
d$httrunk[1:length(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
data
View(data)
deep_crown_distribution <-
d$httrunk[1:length(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
df
View(df)
length(deep_crown_distribution)
View(deep_crown_distribution)
deep_leaf_distribtuion_stand <- function(httrunk, htcrown = 6.36, radx = 2.54, rady = 2.54,
larea = 27, n_slices = 50) {
# adaption from Maeswrap, https://github.com/RemkoDuursma/Maeswrap/blob/master/R/coord3dshape.R
z <- seq(0, 1, length.out = n_slices)
zabs <- z*htcrown
distfun <- sqrt(1 - ((z-1/2)^2)/((1/2)^2))
rx <- radx*distfun
ry <- rady*distfun
slice_xs_area <- 3.14*rx*ry
slice_xs_vol <- (htcrown/n_slices)*slice_xs_area
slice_volume_frac <- slice_xs_vol/sum(slice_xs_vol)
tibble(
h = httrunk + zabs,
larea = larea*slice_volume_frac
)
}
d = results_stand_fla_0.1[[1]]
deep_crown_distribution <-
d$httrunk[1:length(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
View(deep_crown_distribution)
results_stand_fla_0.1[[1]]
d = results_stand_fla_0.1[[1]]
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
deep_crown_distribution
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
View(df)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
View(data)
LAI0.5_focal = c(34:37, 44:47, 54:57, 64:67)
LAI0.5_focal
data <- data %>%
subset(tree_num = LAI0.5_focal)
View(data)
View(data)
data <- data %>%
subset(tree_num = c(34:37, 44:47, 54:57, 64:67))
View(deep_crown)
data <- data %>%
filter(tree_num == c(34:37, 44:47, 54:57, 64:67))
34:37, 44:47, 54:57, 64:67
c(34:37, 44:47, 54:57, 64:67)
data <- data %>%
filter(tree_num == c(34, 35, 36, 37, 44, 45, 46, 47, 54, 55, 56, 57, 64, 65, 66, 67))
View(data)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
data <- data %>%
filter(tree_num == c(34, 35, 36, 37, 44, 45, 46, 47, 54, 55, 56, 57, 64, 65, 66, 67))
data
deep_crown_distribution <-
d$httrunk[1:nrow(d)] %>%
purrr::map(deep_leaf_distribtuion_stand)
df <- tibble(
tree_num = rep(1:length(deep_crown_distribution), times = 50)) %>%
arrange(tree_num)
data <- plyr::ldply(deep_crown_distribution, data.frame) %>%
cbind(df) %>%
arrange(desc(h)) %>%
mutate(la = cumsum(larea)/6123)
data
data %>%
filter(tree_num == 54, 55)
data %>%
filter(tree_num == c(54, 55))
data %>%
filter(tree_num == c(54, 55))
