library(tidyverse)
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
View(SD_height)
LAI <- 1.5
h_mn <- 5
h_cv <- 1
h_sd <- h_mn * h_cv
f_s <- 1.25
density <- 324
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
View(SD_height)
SD_height$H[focal_tree] =  f_s*h_mn
LAI <- 1.5
h_mn <- 5
h_cv <- 0.5
h_sd <- h_mn * h_cv
f_s <- 1.25
density <- 324
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
View(SD_height)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
f_s <- 1.5
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
f_s <- 2
LAI <- 1.5
h_mn <- 5
h_cv <- 0.5
h_sd <- h_mn * h_cv
f_s <- 2
density <- 324
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
coordinates <-
replacePAR("Trees.dat", "xycoords", "xy", newval= coordinates, noquotes=TRUE)
LAI <- 1.5
h_mn <- 5
h_cv <- 0.5
h_sd <- h_mn * h_cv
f_s <- 2
density <- 324
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
library(Maeswrap)
library(rgl)
library(ggplot2)
library(tidyverse)
LAI <- 1.5
h_mn <- 5
h_cv <- 0.5
h_sd <- h_mn * h_cv
f_s <- 2
density <- 324
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
f_s <- 3
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
View(SD_height)
h_cv <- 0.75
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
LAI <- 1.5
h_mn <- 5
h_cv <- 0
h_sd <- h_mn * h_cv
f_s <- 3
density <- 324
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
LAI <- 1.5
h_mn <- 5
h_cv <- 0
h_sd <- h_mn * h_cv
f_s <- 3
density <- 324
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
Plotstand(treesfile = "Trees.dat")
library(Maeswrap)
library(rgl)
library(ggplot2)
library(tidyverse)
LAI <- 1.5
h_mn <- 5
h_cv <- 0
h_sd <- h_mn * h_cv
f_s <- 3
density <- 324
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
Plotstand(treesfile = "Trees.dat")
LAI <- 1.5
density <- 324
h_mn <- 5
h_cv <- 0
h_sd <- h_mn * h_cv
f_s <- 3
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
system("../src/maespa.out")
h_cv <- 0.75
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
LAI <- 1.5
density <- 324
h_mn <- 30
h_cv <- 0.75
h_sd <- h_mn * h_cv
f_s <- 3
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
LAI <- 1.5
density <- 324
h_mn <- 30
h_cv <- 0.75
h_sd <- h_mn * h_cv
f_s <- 3
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
Plotstand(treesfile = "Trees.dat")
dayflx <- readdayflux(filename = "dayflx.dat")
View(dayflx)
randomstand
dunstand <- function (LAI = 2, height = 20, cwcl = 0.8, ALAC = 0.5, stocking = 500,
edge = 10, plotsize = c(25, 25), dbh = 0.3, crownshape = c("ELIP",
"BOX", "CONE", "PARA", "CYL"), path = "", maxnotrees = 25)
{
tf <- "trees.dat"
p <- parseFile(tf)
if (!("indivlarea" %in% tolower(names(p))))
stop("randomstand() only works if you have the INDIV* namelists in trees.dat (e.g. INDIVLAREA, not ALLLAREA)")
o <- getwd()
on.exit(setwd(o))
if (path != "")
setwd(path)
stocking <- stocking/10000
crownshape <- match.arg(crownshape)
plotsize <- plotsize + 2 * edge
xmax <- plotsize[1]
ymax <- plotsize[2]
plotsize <- xmax * ymax
ntrees <- floor(stocking * plotsize)
LAtree <- LAI/stocking
XY <- cbind(runif(ntrees, 0, xmax), runif(ntrees, 0, ymax))
AC <- LAtree/ALAC
cw <- CWfun(crownshape, AC, cwcl)
cl <- cw/cwcl
if (cl > height)
height <- cl
hcb <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(hcb)
whichinplot <- apply(XY, 1, function(x) (x[1] > edge & x[1] <
(xmax - edge)) & (x[2] > edge & x[2] < (xmax - edge)))
replacePAR(tf, "xycoords", "xy", XY)
replacePAR(tf, "notrees", "plot", floor(ntrees))
replacePAR(tf, "values", "indivlarea", rep(LAtree, ntrees))
replacePAR(tf, "values", "indivhttrunk", rep(SD_height_matrix, ntrees))
replacePAR(tf, "values", "indivradx", rep(cw/2, ntrees))
replacePAR(tf, "values", "indivrady", rep(cw/2, ntrees))
replacePAR(tf, "values", "indivhtcrown", rep(cl, ntrees))
replacePAR(tf, "values", "indivdiam", rep(dbh, ntrees))
replacePAR(tf, "xmax", "plot", xmax)
replacePAR(tf, "ymax", "plot", ymax)
replacePAR(tf, "x0", "plot", 0)
replacePAR(tf, "y0", "plot", 0)
cf <- "confile.dat"
replacePAR(cf, "itargets", "treescon", c(1:ntrees)[whichinplot])
replacePAR(cf, "notrees", "treescon", min(ntrees, maxnotrees))
return(list(cl = cl, cw = cw, AC = AC, hcb = hcb, LAtree = LAtree))
}
dunstand(LAI = 2, height = 20, cwcl = 0.8, ALAC = 0.5, stocking = 500,
edge = 10, plotsize = c(25, 25), dbh = 0.3, crownshape = c("ELIP",
"BOX", "CONE", "PARA", "CYL"), path = "", maxnotrees = 25)
dunstand(LAI = 2, height = 20, cwcl = 0.8, ALAC = 0.5, stocking = 500,
edge = 10, plotsize = c(25, 25), dbh = 0.3, crownshape = c("ELIP",
"BOX", "CONE", "PARA", "CYL"), path = "", maxnotrees = 25)
h_mn <- 5
h_cv <- 0.1
LAI <- 1.5
f_s <- 1.5
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
library(Maeswrap)
library(rgl)
library(ggplot2)
library(tidyverse)
setwd("~/Documents/Maespa simulations/Simulations/A1V0L0.5S1.5P1")
h_mn <- 1
h_cv <- 0
LAI <- 0.5
f_s <- 1.99
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
setwd("~/Documents/Maespa simulations/Simulations/A15V0.5L3S1.1P3")
library(Maeswrap)
library(rgl)
library(ggplot2)
library(tidyverse)
h_mn <- 15
h_cv <- 0.25
LAI <- 3
f_s <- 1.25
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
library(Maeswrap)
library(rgl)
library(ggplot2)
library(tidyverse)
h_mn <- 25
h_cv <- 0.5
LAI <- 4.5
f_s <- 1.05
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height$H[focal_tree] =  f_s*h_mn
h_mn <- 25
h_cv <- 0.5
LAI <- 4.5
f_s <- 1.05
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
setwd("~/Documents/Maespa simulations/Simulations/A30V0.75L4.5S1.05P4")
library(Maeswrap)
library(rgl)
library(ggplot2)
library(tidyverse)
h_mn <- 25
h_cv <- 0.5
LAI <- 4.5
f_s <- 1.05
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
coordinates <-
replacePAR("Trees.dat", "xycoords", "xy", newval= coordinates, noquotes=TRUE)
h_mn <- 25
h_cv <- 0.5
LAI <- 4.5
f_s <- 1.05
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
setwd("~/Documents/Maespa simulations/Simulations/A40V1L6S1.01P5")
h_mn <- 30
h_cv <- 0.75
LAI <- 6
f_s <- 1
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
coordinates <-
replacePAR("Trees.dat", "xycoords", "xy", newval= coordinates, noquotes=TRUE)
h_mn <- 30
h_cv <- 0.75
LAI <- 6
f_s <- 1
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
coordinates <-
replacePAR("Trees.dat", "xycoords", "xy", newval= coordinates, noquotes=TRUE)
h_mn <- 30
h_cv <- 0.75
LAI <- 6
f_s <- 1
density <- 324
h_sd <- h_mn * h_cv
randomstand(LAI = LAI, height = h_mn, cwcl = 0.8, ALAC = 0.5,
stocking = density, edge = 25, plotsize = c(50, 50), dbh = 0.5)
itargets <- readPAR("confile.dat", "itargets", "treescon")
replacePAR("confile.dat", "itargets", "treescon", newval = sample(itargets, 1))
focal_tree <- readPAR("confile.dat", "itargets", "treescon")
SD_height <- tibble(
H = rnorm(density, mean = h_mn, sd = h_sd) %>%
subset(., . >=0)
)
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval= SD_height_matrix)
SD_height$H[focal_tree] =  f_s*h_mn
SD_height_matrix <- data.matrix(SD_height)
replacePAR("Trees.dat", "values", "indivhttrunk", newval = SD_height_matrix)
Plotstand(treesfile = "Trees.dat")
setwd("~/Documents/Maespa simulations/Simulations/A1V0L0.5S1.5P1")
randomstand
o <- getwd()
on.exit(setwd(o))
if (path != "")
setwd(path)
library(Maeswrap)
library(rgl)
library(ggplot2)
library(tidyverse)
o <- getwd()
on.exit(setwd(o))
if (path != "")
setwd(path)
o <- getwd()
on.exit(setwd(o))
o <- getwd()
on.exit(setwd(o))
knitr::opts_knit$set(root.dir = normalizePath("path"))
